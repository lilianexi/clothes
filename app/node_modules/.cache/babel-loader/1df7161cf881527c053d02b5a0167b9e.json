{"remainingRequest":"F:\\day37\\day37\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!F:\\day37\\day37\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\day37\\day37\\vue_app_00\\src\\components\\sub\\comment.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\day37\\day37\\vue_app_00\\src\\components\\sub\\comment.vue","mtime":1549864870924},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//1:在当前 comment.vue 单独引入提示框组件\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      pno: 0,\n      pageSize: 4,\n      msg: \"\" //双向绑定评论内容\n\n    };\n  },\n  created: function created() {\n    this.getmore();\n  },\n  methods: {\n    addcomment: function addcomment() {\n      var _this = this;\n\n      //练习1:\n      //*1-为添加评论绑定点击事件\n      //console.log(123);  \n      //*2-获取评论内容   11:49\n      var m = this.msg; //trim()去除字符串两端空格 \"\"\n      //*3-判断评论内容不能为空 \"\"  \"   \"\n      //*4-说论为空提示错误信息\n\n      var size = m.trim().length;\n\n      if (size == 0) {\n        Toast(\"评论内容不能为空\");\n        return;\n      } //*5-获取当前新闻nid\n\n\n      var nid = this.$route.query.nid;\n      console.log(nid); //*6-发送ajax\n      //1:创建参数对象  postData  测试\n      //stringify 将 js对象转换查询字符串\n\n      var postData = this.qs.stringify({\n        nid: nid,\n        content: this.msg\n      }); //2:发送post 请求         测试\n\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"addcomment\";\n      this.axios.post(url, postData).then(function (result) {\n        //console.log(result.data);\n        //1:提示框 发表成功\n        Toast(result.data.msg); //2:清空评论区域内容 comment.vue \n\n        _this.msg = \"\"; //2.2:清空页码\n\n        _this.pno = 0; //2.3:清空原有数组\n\n        _this.list = []; //3:立即查看评论结果\n\n        _this.getMore();\n      });\n    },\n    getmore: function getmore() {\n      var _this2 = this;\n\n      //console.log(123)\n      this.pno++; //var url=\"http://127.0.0.1:3000/getcomment?nid=5\"+\"&pno=\"+this.pno+\"&pageSize=\"+this.pageSize;\n\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"getcomment?nid=5\";\n      url += \"&pno=\" + this.pno;\n      url += \"&pageSize=\" + this.pageSize;\n      this.axios.get(url).then(function (result) {\n        console.log(result); //保留前面的内容，从concat拼接\n\n        var rows = _this2.list.concat(result.data.data);\n\n        _this2.list = rows;\n      });\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,EADA;AAEA,WAAA,CAFA;AAGA,gBAAA,CAHA;AAIA,WAAA,EAJA,CAIA;;AAJA,KAAA;AAMA,GARA;AAUA,SAVA,qBAUA;AACA,SAAA,OAAA;AACA,GAZA;AAaA,WAAA;AACA,cADA,wBACA;AAAA;;AACA;AACA;AACA;AACA;AACA,UAAA,IAAA,KAAA,GAAA,CALA,CAMA;AACA;AACA;;AACA,UAAA,OAAA,EAAA,IAAA,GAAA,MAAA;;AACA,UAAA,QAAA,CAAA,EAAA;AACA,cAAA,UAAA;AACA;AACA,OAbA,CAcA;;;AACA,UAAA,MAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,cAAA,GAAA,CAAA,GAAA,EAhBA,CAiBA;AACA;AACA;;AACA,UAAA,WAAA,KAAA,EAAA,CAAA,SAAA,CAAA;AACA,aAAA,GADA;AAEA,iBAAA,KAAA;AAFA,OAAA,CAAA,CApBA,CAwBA;;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,YAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,QAAA,EAAA,IAAA,CAAA,kBAAA;AACA;AACA;AACA,cAAA,OAAA,IAAA,CAAA,GAAA,EAHA,CAIA;;AACA,cAAA,GAAA,GAAA,EAAA,CALA,CAMA;;AACA,cAAA,GAAA,GAAA,CAAA,CAPA,CAQA;;AACA,cAAA,IAAA,GAAA,EAAA,CATA,CAUA;;AACA,cAAA,OAAA;AACA,OAZA;AAaA,KAzCA;AA0CA,WA1CA,qBA0CA;AAAA;;AACA;AACA,WAAA,GAAA,GAFA,CAGA;;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,kBAAA;AACA,aAAA,UAAA,KAAA,GAAA;AACA,aAAA,eAAA,KAAA,QAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,kBAAA;AACA,gBAAA,GAAA,CAAA,MAAA,EADA,CAEA;;AACA,YAAA,OAAA,OAAA,IAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA,IAAA,CAAA;;AACA,eAAA,IAAA,GAAA,IAAA;AACA,OALA;AAMA;AAxDA;AAbA,CAAA","sourcesContent":["<!--子组件-->\r\n<template>\r\n   \r\n        <div class=\"mui-card\">\r\n\t\t\t<!--\t<div class=\"mui-card-header\"></div>-->\r\n\t\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t\t\t发表评论\r\n                        <textarea name=\"\" id=\"\" placeholder=\"请发表评论\" maxlength=\"100\" v-model=\"msg\"></textarea>\r\n                         <mt-button type=\"primary\"  size=\"large\"@click=\"addcomment()\">发表评论</mt-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mui-card-footer\">\r\n          \r\n                <div class=\"cmt-list\">\r\n                    <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\">\r\n                        <div >{{i+1}} 发表时间:{{item.ctime}}</div>\r\n                        <div>{{item.content}}</div>\r\n                    </div>\r\n                 </div>\r\n                </div>\r\n                <button>加载更多</button>\r\n\t\t\t</div>\r\n\r\n</template>\r\n<script>\r\n//1:在当前 comment.vue 单独引入提示框组件\r\n  import {Toast} from \"mint-ui\"\r\n    export default{\r\n        data(){\r\n            return{\r\n                list:[],\r\n                pno:0,\r\n                pageSize:4,\r\n                 msg:\"\"  //双向绑定评论内容\r\n            }\r\n        },\r\n \r\n          created(){\r\n            this.getmore()\r\n        },\r\n       methods:{\r\n            addcomment(){\r\n        //练习1:\r\n        //*1-为添加评论绑定点击事件\r\n        //console.log(123);  \r\n        //*2-获取评论内容   11:49\r\n        var m = this.msg;\r\n        //trim()去除字符串两端空格 \"\"\r\n        //*3-判断评论内容不能为空 \"\"  \"   \"\r\n        //*4-说论为空提示错误信息\r\n        var size = m.trim().length;\r\n        if(size == 0){\r\n          Toast(\"评论内容不能为空\");\r\n          return;\r\n        }\r\n        //*5-获取当前新闻nid\r\n        var nid = this.$route.query.nid;\r\n        console.log(nid)\r\n        //*6-发送ajax\r\n        //1:创建参数对象  postData  测试\r\n        //stringify 将 js对象转换查询字符串\r\n        var postData = this.qs.stringify({\r\n          nid:nid,\r\n          content:this.msg\r\n        });\r\n        //2:发送post 请求         测试\r\n        var url = \"http://127.0.0.1:3000/\";\r\n            url+=\"addcomment\";\r\n        this.axios.post(url,postData).then(result=>{\r\n          //console.log(result.data);\r\n          //1:提示框 发表成功\r\n          Toast(result.data.msg);\r\n          //2:清空评论区域内容 comment.vue \r\n          this.msg = \"\";\r\n          //2.2:清空页码\r\n          this.pno = 0;\r\n          //2.3:清空原有数组\r\n          this.list = [];\r\n          //3:立即查看评论结果\r\n          this.getMore();\r\n        })\r\n        },\r\n        getmore(){\r\n                   //console.log(123)\r\n                this.pno++;\r\n                //var url=\"http://127.0.0.1:3000/getcomment?nid=5\"+\"&pno=\"+this.pno+\"&pageSize=\"+this.pageSize;\r\n                var url=\"http://127.0.0.1:3000/\";\r\n                url+=\"getcomment?nid=5\";\r\n                url+=\"&pno=\"+this.pno;\r\n                url+=\"&pageSize=\"+this.pageSize;\r\n                this.axios.get(url).then(result=>{\r\n                    console.log(result)\r\n                    //保留前面的内容，从concat拼接\r\n                    var rows=this.list.concat(result.data.data)\r\n                  this.list=rows;\r\n                })\r\n        }\r\n          \r\n    }\r\n    }\r\n</script>\r\n<style>\r\n   span{\r\n    color: #6d6d72;\r\n    border-radius: 0 0 2px 2px\r\n    } \r\n  \r\n</style>"],"sourceRoot":"src\\components\\sub"}]}