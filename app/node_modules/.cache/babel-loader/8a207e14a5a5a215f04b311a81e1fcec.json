{"remainingRequest":"C:\\Users\\july\\Desktop\\test\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\july\\Desktop\\test\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\july\\Desktop\\test\\app\\src\\components\\login\\demo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\july\\Desktop\\test\\app\\src\\components\\login\\demo.vue","mtime":1552493676722},{"path":"C:\\Users\\july\\Desktop\\test\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\july\\Desktop\\test\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\july\\Desktop\\test\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cropper from 'cropperjs';\nexport default {\n  components: {},\n  data: function data() {\n    return {\n      headerImage: '',\n      picValue: '',\n      cropper: '',\n      croppable: false,\n      panel: false,\n      url: ''\n    };\n  },\n  mounted: function mounted() {\n    //初始化这个裁剪框\n    var self = this;\n    var image = document.getElementById('image');\n    this.cropper = new Cropper(image, {\n      aspectRatio: 1,\n      viewMode: 1,\n      background: false,\n      zoomable: false,\n      ready: function ready() {\n        self.croppable = true;\n      }\n    });\n  },\n  methods: {\n    getObjectURL: function getObjectURL(file) {\n      var url = null;\n\n      if (window.createObjectURL != undefined) {\n        // basic\n        url = window.createObjectURL(file);\n      } else if (window.URL != undefined) {\n        // mozilla(firefox)\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        // webkit or chrome\n        url = window.webkitURL.createObjectURL(file);\n      }\n\n      return url;\n    },\n    change: function change(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length) return;\n      this.panel = true;\n      this.picValue = files[0];\n      this.url = this.getObjectURL(this.picValue); //每次替换图片要重新得到新的url\n\n      if (this.cropper) {\n        this.cropper.replace(this.url);\n      }\n\n      this.panel = true;\n    },\n    crop: function crop() {\n      this.panel = false;\n      var croppedCanvas;\n      var roundedCanvas;\n\n      if (!this.croppable) {\n        return;\n      } // Crop\n\n\n      croppedCanvas = this.cropper.getCroppedCanvas();\n      console.log(this.cropper); // Round\n\n      roundedCanvas = this.getRoundedCanvas(croppedCanvas);\n      this.headerImage = roundedCanvas.toDataURL();\n      this.postImg();\n    },\n    getRoundedCanvas: function getRoundedCanvas(sourceCanvas) {\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var width = sourceCanvas.width;\n      var height = sourceCanvas.height;\n      canvas.width = width;\n      canvas.height = height;\n      context.imageSmoothingEnabled = true;\n      context.drawImage(sourceCanvas, 0, 0, width, height);\n      context.globalCompositeOperation = 'destination-in';\n      context.beginPath();\n      context.arc(width / 2, height / 2, Math.min(width, height) / 2, 0, 2 * Math.PI, true);\n      context.fill();\n      return canvas;\n    },\n    postImg: function postImg() {//这边写图片的上传\n    }\n  }\n};",{"version":3,"sources":["demo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <div id=\"demo\">\r\n      <!-- 遮罩层 -->\r\n      <div class=\"container\" v-show=\"panel\">\r\n        <div>\r\n          <img id=\"image\" :src=\"url\" alt=\"Picture\">\r\n        </div>\r\n \r\n        <button type=\"button\" id=\"button\" @click=\"crop\">确定</button>\r\n \r\n      </div>\r\n \r\n      <div style=\"padding:20px;\">\r\n        <div class=\"show\">\r\n          <div class=\"picture\" :style=\"'backgroundImage:url('+headerImage+')'\">\r\n          </div>\r\n        </div>\r\n        <div style=\"margin-top:20px;\">\r\n          <input type=\"file\" id=\"change\" accept=\"image\" @change=\"change\">\r\n          <label for=\"change\"></label>\r\n        </div>\r\n \r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import Cropper from 'cropperjs'\r\n  export default {\r\n    components: {\r\n \r\n    },\r\n    data () {\r\n      return {\r\n        headerImage:'',\r\n        picValue:'',\r\n        cropper:'',\r\n        croppable:false,\r\n        panel:false,\r\n        url:''\r\n      }\r\n    },\r\n    mounted () {\r\n      //初始化这个裁剪框\r\n      var self = this;\r\n      var image = document.getElementById('image');\r\n      this.cropper = new Cropper(image, {\r\n        aspectRatio: 1,\r\n        viewMode: 1,\r\n        background:false,\r\n        zoomable:false,\r\n        ready: function () {\r\n          self.croppable = true;\r\n        }\r\n      });\r\n    },\r\n    methods: {\r\n      getObjectURL (file) {\r\n        var url = null ;\r\n        if (window.createObjectURL!=undefined) { // basic\r\n          url = window.createObjectURL(file) ;\r\n        } else if (window.URL!=undefined) { // mozilla(firefox)\r\n          url = window.URL.createObjectURL(file) ;\r\n        } else if (window.webkitURL!=undefined) { // webkit or chrome\r\n          url = window.webkitURL.createObjectURL(file) ;\r\n        }\r\n        return url ;\r\n      },\r\n      change (e) {\r\n        let files = e.target.files || e.dataTransfer.files;\r\n        if (!files.length) return;\r\n        this.panel = true;\r\n        this.picValue = files[0];\r\n \r\n        this.url = this.getObjectURL(this.picValue);\r\n        //每次替换图片要重新得到新的url\r\n        if(this.cropper){\r\n          this.cropper.replace(this.url);\r\n        }\r\n        this.panel = true;\r\n \r\n      },\r\n      crop () {\r\n        this.panel = false;\r\n        var croppedCanvas;\r\n        var roundedCanvas;\r\n \r\n        if (!this.croppable) {\r\n          return;\r\n        }\r\n        // Crop\r\n        croppedCanvas = this.cropper.getCroppedCanvas();\r\n        console.log(this.cropper)\r\n        // Round\r\n        roundedCanvas = this.getRoundedCanvas(croppedCanvas);\r\n \r\n        this.headerImage = roundedCanvas.toDataURL();\r\n        this.postImg()\r\n \r\n      },\r\n      getRoundedCanvas (sourceCanvas) {\r\n \r\n        var canvas = document.createElement('canvas');\r\n        var context = canvas.getContext('2d');\r\n        var width = sourceCanvas.width;\r\n        var height = sourceCanvas.height;\r\n \r\n        canvas.width = width;\r\n        canvas.height = height;\r\n \r\n        context.imageSmoothingEnabled = true;\r\n        context.drawImage(sourceCanvas, 0, 0, width, height);\r\n        context.globalCompositeOperation = 'destination-in';\r\n        context.beginPath();\r\n        context.arc(width / 2, height / 2, Math.min(width, height) / 2, 0, 2 * Math.PI, true);\r\n        context.fill();\r\n \r\n        return canvas;\r\n      },\r\n      postImg () {\r\n        //这边写图片的上传\r\n      }\r\n    }\r\n  }\r\n</script>\r\n \r\n<style>\r\n  *{\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  #demo #button {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 10px;\r\n    width: 80px;\r\n    height: 40px;\r\n    border:none;\r\n    border-radius: 5px;\r\n    background:white;\r\n  }\r\n  #demo .show {\r\n    width: 100px;\r\n    height: 100px;\r\n    overflow: hidden;\r\n    position: relative;\r\n    border-radius: 50%;\r\n    border: 1px solid #d5d5d5;\r\n  }\r\n  #demo .picture {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    background-position: center center;\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n  }\r\n  #demo .container {\r\n    z-index: 99;\r\n    position: fixed;\r\n    padding-top: 60px;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background:rgba(0,0,0,1);\r\n  }\r\n \r\n  #demo #image {\r\n    max-width: 100%;\r\n  }\r\n \r\n  .cropper-view-box,.cropper-face {\r\n    border-radius: 50%;\r\n  }\r\n  /*!\r\n   * Cropper.js v1.0.0-rc\r\n   * https://github.com/fengyuanchen/cropperjs\r\n   *\r\n   * Copyright (c) 2017 Fengyuan Chen\r\n   * Released under the MIT license\r\n   *\r\n   * Date: 2017-03-25T12:02:21.062Z\r\n   */\r\n \r\n  .cropper-container {\r\n    font-size: 0;\r\n    line-height: 0;\r\n \r\n    position: relative;\r\n \r\n    -webkit-user-select: none;\r\n \r\n    -moz-user-select: none;\r\n \r\n    -ms-user-select: none;\r\n \r\n    user-select: none;\r\n \r\n    direction: ltr;\r\n    -ms-touch-action: none;\r\n    touch-action: none\r\n  }\r\n \r\n  .cropper-container img {\r\n    /* Avoid margin top issue (Occur only when margin-top <= -height) */\r\n    display: block;\r\n    min-width: 0 !important;\r\n    max-width: none !important;\r\n    min-height: 0 !important;\r\n    max-height: none !important;\r\n    width: 100%;\r\n    height: 100%;\r\n    image-orientation: 0deg\r\n  }\r\n \r\n  .cropper-wrap-box,\r\n  .cropper-canvas,\r\n  .cropper-drag-box,\r\n  .cropper-crop-box,\r\n  .cropper-modal {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n  }\r\n \r\n  .cropper-wrap-box {\r\n    overflow: hidden;\r\n  }\r\n \r\n  .cropper-drag-box {\r\n    opacity: 0;\r\n    #fff;\r\n  }\r\n \r\n  .cropper-modal {\r\n    opacity: .5;\r\n    #000;\r\n  }\r\n \r\n  .cropper-view-box {\r\n    display: block;\r\n    overflow: hidden;\r\n \r\n    width: 100%;\r\n    height: 100%;\r\n \r\n    outline: 1px solid #39f;\r\n    outline-color: rgba(51, 153, 255, 0.75);\r\n  }\r\n \r\n  .cropper-dashed {\r\n    position: absolute;\r\n \r\n    display: block;\r\n \r\n    opacity: .5;\r\n    border: 0 dashed #eee\r\n  }\r\n \r\n  .cropper-dashed.dashed-h {\r\n    top: 33.33333%;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 33.33333%;\r\n    border-top-width: 1px;\r\n    border-bottom-width: 1px\r\n  }\r\n \r\n  .cropper-dashed.dashed-v {\r\n    top: 0;\r\n    left: 33.33333%;\r\n    width: 33.33333%;\r\n    height: 100%;\r\n    border-right-width: 1px;\r\n    border-left-width: 1px\r\n  }\r\n \r\n  .cropper-center {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n \r\n    display: block;\r\n \r\n    width: 0;\r\n    height: 0;\r\n \r\n    opacity: .75\r\n  }\r\n \r\n  .cropper-center:before,\r\n  .cropper-center:after {\r\n    position: absolute;\r\n    display: block;\r\n    content: ' ';\r\n    #eee\r\n  }\r\n \r\n  .cropper-center:before {\r\n    top: 0;\r\n    left: -3px;\r\n    width: 7px;\r\n    height: 1px\r\n  }\r\n \r\n  .cropper-center:after {\r\n    top: -3px;\r\n    left: 0;\r\n    width: 1px;\r\n    height: 7px\r\n  }\r\n \r\n  .cropper-face,\r\n  .cropper-line,\r\n  .cropper-point {\r\n    position: absolute;\r\n \r\n    display: block;\r\n \r\n    width: 100%;\r\n    height: 100%;\r\n \r\n    opacity: .1;\r\n  }\r\n \r\n  .cropper-face {\r\n    top: 0;\r\n    left: 0;\r\n \r\n \r\n \r\n  .cropper-line.line-e {\r\n    top: 0;\r\n    right: -3px;\r\n    width: 5px;\r\n    cursor: e-resize\r\n  }\r\n \r\n  .cropper-line.line-n {\r\n    top: -3px;\r\n    left: 0;\r\n    height: 5px;\r\n    cursor: n-resize\r\n  }\r\n \r\n  .cropper-line.line-w {\r\n    top: 0;\r\n    left: -3px;\r\n    width: 5px;\r\n    cursor: w-resize\r\n  }\r\n \r\n  .cropper-line.line-s {\r\n    bottom: -3px;\r\n    left: 0;\r\n    height: 5px;\r\n    cursor: s-resize\r\n  }\r\n \r\n  .cropper-point {\r\n    width: 5px;\r\n    height: 5px;\r\n \r\n    opacity: .75;\r\n\r\n  }\r\n \r\n  .cropper-point.point-e {\r\n    top: 50%;\r\n    right: -3px;\r\n    margin-top: -3px;\r\n    cursor: e-resize\r\n  }\r\n \r\n  .cropper-point.point-n {\r\n    top: -3px;\r\n    left: 50%;\r\n    margin-left: -3px;\r\n    cursor: n-resize\r\n  }\r\n \r\n  .cropper-point.point-w {\r\n    top: 50%;\r\n    left: -3px;\r\n    margin-top: -3px;\r\n    cursor: w-resize\r\n  }\r\n \r\n  .cropper-point.point-s {\r\n    bottom: -3px;\r\n    left: 50%;\r\n    margin-left: -3px;\r\n    cursor: s-resize\r\n  }\r\n \r\n  .cropper-point.point-ne {\r\n    top: -3px;\r\n    right: -3px;\r\n    cursor: ne-resize\r\n  }\r\n \r\n  .cropper-point.point-nw {\r\n    top: -3px;\r\n    left: -3px;\r\n    cursor: nw-resize\r\n  }\r\n \r\n  .cropper-point.point-sw {\r\n    bottom: -3px;\r\n    left: -3px;\r\n    cursor: sw-resize\r\n  }\r\n \r\n  .cropper-point.point-se {\r\n    right: -3px;\r\n    bottom: -3px;\r\n    width: 20px;\r\n    height: 20px;\r\n    cursor: se-resize;\r\n    opacity: 1\r\n  }\r\n \r\n  @media (min-width: 768px) {\r\n \r\n    .cropper-point.point-se {\r\n      width: 15px;\r\n      height: 15px\r\n    }\r\n  }\r\n \r\n  @media (min-width: 992px) {\r\n \r\n    .cropper-point.point-se {\r\n      width: 10px;\r\n      height: 10px\r\n    }\r\n  }\r\n \r\n  @media (min-width: 1200px) {\r\n \r\n    .cropper-point.point-se {\r\n      width: 5px;\r\n      height: 5px;\r\n      opacity: .75\r\n    }\r\n  }\r\n \r\n  .cropper-point.point-se:before {\r\n    position: absolute;\r\n    right: -50%;\r\n    bottom: -50%;\r\n    display: block;\r\n    width: 200%;\r\n    height: 200%;\r\n    content: ' ';\r\n    opacity: 0;\r\n \r\n  }\r\n \r\n  .cropper-invisible {\r\n    opacity: 0;\r\n  }\r\n \r\n  .cropper-bg {\r\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\r\n  }\r\n \r\n  .cropper-hide {\r\n    position: absolute;\r\n \r\n    display: block;\r\n \r\n    width: 0;\r\n    height: 0;\r\n  }\r\n \r\n  .cropper-hidden {\r\n    display: none !important;\r\n  }\r\n \r\n  .cropper-move {\r\n    cursor: move;\r\n  }\r\n \r\n  .cropper-crop {\r\n    cursor: crosshair;\r\n  }\r\n \r\n  .cropper-disabled .cropper-drag-box,\r\n  .cropper-disabled .cropper-face,\r\n  .cropper-disabled .cropper-line,\r\n  .cropper-disabled .cropper-point {\r\n    cursor: not-allowed;\r\n  }\r\n \r\n \r\n</style>"],"sourceRoot":"src\\components\\login"}]}