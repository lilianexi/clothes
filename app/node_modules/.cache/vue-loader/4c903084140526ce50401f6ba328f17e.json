{"remainingRequest":"F:\\day37\\day37\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\day37\\day37\\vue_app_00\\src\\components\\sub\\comment.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"F:\\day37\\day37\\vue_app_00\\src\\components\\sub\\comment.vue","mtime":1549864870924},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"F:\\day37\\day37\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nspan{\n color: #6d6d72;\n border-radius: 0 0 2px 2px\n } \n\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src\\components\\sub","sourcesContent":["<!--子组件-->\r\n<template>\r\n   \r\n        <div class=\"mui-card\">\r\n\t\t\t<!--\t<div class=\"mui-card-header\"></div>-->\r\n\t\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t\t\t发表评论\r\n                        <textarea name=\"\" id=\"\" placeholder=\"请发表评论\" maxlength=\"100\" v-model=\"msg\"></textarea>\r\n                         <mt-button type=\"primary\"  size=\"large\"@click=\"addcomment()\">发表评论</mt-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mui-card-footer\">\r\n          \r\n                <div class=\"cmt-list\">\r\n                    <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\">\r\n                        <div >{{i+1}} 发表时间:{{item.ctime}}</div>\r\n                        <div>{{item.content}}</div>\r\n                    </div>\r\n                 </div>\r\n                </div>\r\n                <button>加载更多</button>\r\n\t\t\t</div>\r\n\r\n</template>\r\n<script>\r\n//1:在当前 comment.vue 单独引入提示框组件\r\n  import {Toast} from \"mint-ui\"\r\n    export default{\r\n        data(){\r\n            return{\r\n                list:[],\r\n                pno:0,\r\n                pageSize:4,\r\n                 msg:\"\"  //双向绑定评论内容\r\n            }\r\n        },\r\n \r\n          created(){\r\n            this.getmore()\r\n        },\r\n       methods:{\r\n            addcomment(){\r\n        //练习1:\r\n        //*1-为添加评论绑定点击事件\r\n        //console.log(123);  \r\n        //*2-获取评论内容   11:49\r\n        var m = this.msg;\r\n        //trim()去除字符串两端空格 \"\"\r\n        //*3-判断评论内容不能为空 \"\"  \"   \"\r\n        //*4-说论为空提示错误信息\r\n        var size = m.trim().length;\r\n        if(size == 0){\r\n          Toast(\"评论内容不能为空\");\r\n          return;\r\n        }\r\n        //*5-获取当前新闻nid\r\n        var nid = this.$route.query.nid;\r\n        console.log(nid)\r\n        //*6-发送ajax\r\n        //1:创建参数对象  postData  测试\r\n        //stringify 将 js对象转换查询字符串\r\n        var postData = this.qs.stringify({\r\n          nid:nid,\r\n          content:this.msg\r\n        });\r\n        //2:发送post 请求         测试\r\n        var url = \"http://127.0.0.1:3000/\";\r\n            url+=\"addcomment\";\r\n        this.axios.post(url,postData).then(result=>{\r\n          //console.log(result.data);\r\n          //1:提示框 发表成功\r\n          Toast(result.data.msg);\r\n          //2:清空评论区域内容 comment.vue \r\n          this.msg = \"\";\r\n          //2.2:清空页码\r\n          this.pno = 0;\r\n          //2.3:清空原有数组\r\n          this.list = [];\r\n          //3:立即查看评论结果\r\n          this.getMore();\r\n        })\r\n        },\r\n        getmore(){\r\n                   //console.log(123)\r\n                this.pno++;\r\n                //var url=\"http://127.0.0.1:3000/getcomment?nid=5\"+\"&pno=\"+this.pno+\"&pageSize=\"+this.pageSize;\r\n                var url=\"http://127.0.0.1:3000/\";\r\n                url+=\"getcomment?nid=5\";\r\n                url+=\"&pno=\"+this.pno;\r\n                url+=\"&pageSize=\"+this.pageSize;\r\n                this.axios.get(url).then(result=>{\r\n                    console.log(result)\r\n                    //保留前面的内容，从concat拼接\r\n                    var rows=this.list.concat(result.data.data)\r\n                  this.list=rows;\r\n                })\r\n        }\r\n          \r\n    }\r\n    }\r\n</script>\r\n<style>\r\n   span{\r\n    color: #6d6d72;\r\n    border-radius: 0 0 2px 2px\r\n    } \r\n  \r\n</style>"]}]}